import{L as U}from"./Admin.b51a6280.js";import{H as L,r as M,z as k,a as j,o,c as n,b as C,w as P,d as s,e as V,f as y,v as N,t as d,g as m,s as x,F as i,p as c,h as H,i as p,n as B}from"./app.8bde5e17.js";import{_ as D}from"./_plugin-vue_export-helper.cdc0426e.js";const F={layout:U,components:{Head:L},props:{errors:Object,attendance:Object,month:String,classrooms:Array,lessons:Array},setup(w){const e=M({month:w.month||new URL(document.location).searchParams.get("month"),classroom_id:new URL(document.location).searchParams.get("classroom_id"),lesson_id:new URL(document.location).searchParams.get("lesson_id")}),r=()=>{H.Inertia.get("/admin/presence-teacher",{month:e.month,classroom_id:e.classroom_id,lesson_id:e.lesson_id})},a=k(()=>{if(!e.month)return[];const[l,t]=e.month.split("-").map(Number);return Array.from({length:new Date(l,t,0).getDate()},(_,u)=>u+1)}),g=k(()=>{const l=new URLSearchParams;return e.month&&l.append("month",e.month),e.classroom_id&&l.append("classroom_id",e.classroom_id),e.lesson_id&&l.append("lesson_id",e.lesson_id),`/admin/presence-teacher/export?${l.toString()}`});return{form:e,filter:r,daysInMonth:a,exportUrl:g,statusClass:l=>{switch(l){case"A":return"text-danger";case"H":return"text-success";case"I":return"text-warning";case"S":return"text-info";default:return""}}}}},I=s("title",null,"Laporan Absensi Guru - Aplikasi Absensi Online",-1),O={class:"container-fluid mb-5 mt-5"},R={class:"row"},K={class:"col-md-12"},T={class:"card border-0 shadow mb-4"},z={class:"card-body"},E=s("h5",null,[s("i",{class:"fa fa-filter"}),p(" Filter Absensi")],-1),G=s("hr",null,null,-1),q={class:"row"},J={class:"col-md-4"},Q=s("label",{class:"control-label",for:"month"},"Bulan",-1),W={key:0,class:"alert alert-danger mt-2"},X={class:"col-md-4"},Y=s("label",{class:"control-label",for:"classroom_id"},"Kelas",-1),Z=s("option",{value:""},"Semua Kelas",-1),$=["value"],ss={key:0,class:"alert alert-danger mt-2"},ts={class:"col-md-4"},es=s("label",{class:"control-label",for:"lesson_id"},"Mata Pelajaran",-1),os=s("option",{value:""},"Semua Mata Pelajaran",-1),ns=["value"],as={key:0,class:"alert alert-danger mt-2"},rs=s("div",{class:"col-md-12 mt-3"},[s("button",{type:"submit",class:"btn btn-md btn-primary border-0 shadow w-100"},[s("i",{class:"fa fa-filter"}),p(" Filter ")])],-1),ls={class:"card border-0 shadow"},ds={class:"card-body"},is={class:"d-flex justify-content-end mb-3"},cs=["href"],_s=s("i",{class:"fa fa-download"},null,-1),ms=p(" Export "),us=[_s,ms],hs={class:"table-responsive"},fs={class:"table table-bordered"},bs=s("th",null,"Nama",-1),vs=s("th",null,"Kelas",-1),ys=s("th",null,"Mata Pelajaran",-1),ps=["rowspan"],ws=["rowspan"];function gs(w,e,r,a,g,A){const l=j("Head");return o(),n(i,null,[C(l,null,{default:P(()=>[I]),_:1}),s("div",O,[s("div",R,[s("div",K,[s("div",T,[s("div",z,[E,G,s("form",{onSubmit:e[3]||(e[3]=V((...t)=>a.filter&&a.filter(...t),["prevent"]))},[s("div",q,[s("div",J,[Q,y(s("input",{type:"month",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>a.form.month=t)},null,512),[[N,a.form.month]]),r.errors.month?(o(),n("div",W,d(r.errors.month),1)):m("",!0)]),s("div",X,[Y,y(s("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>a.form.classroom_id=t)},[Z,(o(!0),n(i,null,c(r.classrooms,(t,_)=>(o(),n("option",{key:_,value:t.id},d(t.title),9,$))),128))],512),[[x,a.form.classroom_id]]),r.errors.classroom_id?(o(),n("div",ss,d(r.errors.classroom_id),1)):m("",!0)]),s("div",ts,[es,y(s("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=t=>a.form.lesson_id=t)},[os,(o(!0),n(i,null,c(r.lessons,(t,_)=>(o(),n("option",{key:_,value:t.id},d(t.title),9,ns))),128))],512),[[x,a.form.lesson_id]]),r.errors.lesson_id?(o(),n("div",as,d(r.errors.lesson_id),1)):m("",!0)]),rs])],32)])]),s("div",ls,[s("div",ds,[s("div",is,[s("a",{href:a.exportUrl,class:"btn btn-md btn-success border-0 shadow mt-3"},us,8,cs)]),s("div",hs,[s("table",fs,[s("thead",null,[s("tr",null,[bs,vs,ys,(o(!0),n(i,null,c(a.daysInMonth,t=>(o(),n("th",{key:t},d(t),1))),128))])]),s("tbody",null,[(o(!0),n(i,null,c(r.attendance,(t,_)=>(o(),n(i,{key:_},[(o(!0),n(i,null,c(t,(u,S)=>(o(),n(i,{key:S},[(o(!0),n(i,null,c(u,(h,b)=>(o(),n("tr",{key:b},[b===0?(o(),n("td",{key:0,rowspan:Object.keys(t).reduce((f,v)=>f+t[v].length,0)},d(h.name),9,ps)):m("",!0),b===0?(o(),n("td",{key:1,rowspan:u.length},d(h.classroom),9,ws)):m("",!0),s("td",null,d(h.lesson),1),(o(!0),n(i,null,c(h.attendance,(f,v)=>(o(),n("td",{key:v},[s("span",{class:B(a.statusClass(f))},d(f),3)]))),128))]))),128))],64))),128))],64))),128))])])])])])])])])],64)}const Ss=D(F,[["render",gs]]);export{Ss as default};
