import{L as B}from"./Student.8552d821.js";import{u as P,Z as U,H as F,L as Y,m as f,a as S,o as d,c as l,b as p,w as N,d as t,t as r,F as C,p as T,e as u,g as m,n as q,h as b,i as v}from"./app.8bde5e17.js";import{a as g}from"./index.d30004a7.js";import{S as R}from"./sweetalert2.all.9e63d2cf.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";/*! vue-countdown v2.0.0 | (c) 2018-present Chen Fengyuan | MIT */const y=1e3,k=60*y,w=60*k,I=24*w,L="abort",j="end",D="progress",A="start",V="visibilitychange";var G=P({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:i=>i>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:i=>i>=0},transform:{type:Function,default:i=>i}},emits:[L,j,D,A],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/I)},hours(){return Math.floor(this.totalMilliseconds%I/w)},minutes(){return Math.floor(this.totalMilliseconds%w/k)},seconds(){return Math.floor(this.totalMilliseconds%k/y)},milliseconds(){return Math.floor(this.totalMilliseconds%y)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/w)},totalMinutes(){return Math.floor(this.totalMilliseconds/k)},totalSeconds(){return Math.floor(this.totalMilliseconds/y)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(V,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(V,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.emitEvents&&this.$emit(A),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const i=Math.min(this.totalMilliseconds,this.interval);if(i>0){let o,s;const e=c=>{o||(o=c),s||(s=c);const _=c-o;_>=i||_+(c-s)/2>=i?this.progress():this.requestId=requestAnimationFrame(e),s=c};this.requestId=requestAnimationFrame(e)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){!this.counting||(this.totalMilliseconds-=this.interval,this.emitEvents&&this.totalMilliseconds>0&&this.$emit(D,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){!this.counting||(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(L))},end(){!this.counting||(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(j))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return U(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const W={layout:B,components:{Head:F,Link:Y,VueCountdown:G},props:{id:Number,page:Number,exam_group:Object,all_questions:Array,question_answered:Number,question_active:Object,answer_order:Array,duration:Object},setup(i){let o=["A","B","C","D","E"];const s=f(0),e=f(i.duration.duration),c=()=>{e.value=e.value-1e3,s.value=s.value+1,e.value>0&&s.value%10==1&&g.put(`/student/exam-duration/update/${i.duration.id}`,{duration:e.value})},_=()=>{g.put(`/student/exam-duration/update/${i.duration.id}`,{duration:e.value}),b.Inertia.get(`/student/exam/${i.id}/${i.page-1}`)},E=()=>{g.put(`/student/exam-duration/update/${i.duration.id}`,{duration:e.value}),b.Inertia.get(`/student/exam/${i.id}/${i.page+1}`)},M=x=>{g.put(`/student/exam-duration/update/${i.duration.id}`,{duration:e.value}),b.Inertia.get(`/student/exam/${i.id}/${x+1}`)},n=(x,H,O)=>{b.Inertia.post("/student/exam-answer",{exam_id:x,exam_session_id:i.exam_group.exam_session.id,question_id:H,answer:O,duration:e.value})},a=f(!1),h=f(!1);return{options:o,duration:e,handleChangeDuration:c,prevPage:_,nextPage:E,clickQuestion:M,submitAnswer:n,showModalEndExam:a,showModalEndTimeExam:h,endExam:()=>{b.Inertia.post("/student/exam-end",{exam_group_id:i.exam_group.id,exam_id:i.exam_group.exam.id,exam_session_id:i.exam_group.exam_session.id}),R.fire({title:"Success!",text:"Ujian Selesai!.",icon:"success",showConfirmButton:!1,timer:4e3})}}}},z={class:"row mb-5"},K={class:"col-md-7"},Z={class:"card border-0 shadow"},J={class:"card-header"},X={class:"d-flex justify-content-between"},$={class:"mb-0"},tt=v("Soal No. "),et={class:"fw-bold"},st={class:"badge bg-info p-2"},it=t("i",{class:"fa fa-clock"},null,-1),nt={class:"card-body"},ot={key:0},at=["innerHTML"],dt={width:"50",style:{padding:"10px"}},lt={key:0,class:"btn btn-info btn-sm w-100 shdaow"},rt=["onClick"],ut={style:{padding:"10px"}},ct=["innerHTML"],ht={key:1},mt=t("div",{class:"alert alert-danger border-0 shadow"},[t("i",{class:"fa fa-exclamation-triangle"}),v(" Soal Tidak Ditemukan!. ")],-1),_t=[mt],bt={class:"card-footer"},vt={class:"d-flex justify-content-between"},ft={class:"text-start"},gt={class:"text-end"},yt={class:"col-md-5"},kt={class:"card border-0 shadow"},wt={class:"card-header text-center"},Et={class:"badge bg-success p-2"},Mt={class:"card-body",style:{height:"330px","overflow-y":"auto"}},xt={width:"20%",style:{width:"20%",float:"left"}},Ct={style:{padding:"5px"}},St=["onClick"],pt=["onClick"],Nt=["onClick"],Tt={class:"card-footer"},qt={class:"modal-dialog"},It={class:"modal-content"},Lt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Akhiri Ujian ?")],-1),jt=t("div",{class:"modal-body"}," Setelah mengakhiri ujian, Anda tidak dapat kembali ke ujian ini lagi. Yakin akan mengakhiri ujian? ",-1),Dt={class:"modal-footer"},At={class:"modal-dialog"},Vt={class:"modal-content"},Ht=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Waktu Habis !")],-1),Ot=t("div",{class:"modal-body"},[v(" Waktu ujian sudah berakhir!. Klik "),t("strong",{class:"fw-bold"},"Ya"),v(" untuk mengakhiri ujian. ")],-1),Bt={class:"modal-footer"};function Pt(i,o,s,e,c,_){const E=S("Head"),M=S("VueCountdown");return d(),l(C,null,[p(E,null,{default:N(()=>[t("title",null,"Ujian Dengan Nomor Soal : "+r(s.page)+" - Aplikasi Ujian Online",1)]),_:1}),t("div",z,[t("div",K,[t("div",Z,[t("div",J,[t("div",X,[t("div",null,[t("h5",$,[tt,t("strong",et,r(s.page),1)])]),t("div",null,[p(M,{time:e.duration,onProgress:e.handleChangeDuration,onEnd:o[0]||(o[0]=n=>e.showModalEndTimeExam=!0)},{default:N(({hours:n,minutes:a,seconds:h})=>[t("span",st,[it,v(" "+r(n)+" jam, "+r(a)+" menit, "+r(h)+" detik.",1)])]),_:1},8,["time","onProgress"])])])]),t("div",nt,[s.question_active!==null?(d(),l("div",ot,[t("div",null,[t("p",{innerHTML:s.question_active.question.question},null,8,at)]),t("table",null,[t("tbody",null,[(d(!0),l(C,null,T(s.answer_order,(n,a)=>(d(),l("tr",{key:a},[t("td",dt,[n==s.question_active.answer?(d(),l("button",lt,r(e.options[a]),1)):(d(),l("button",{key:1,onClick:u(h=>e.submitAnswer(s.question_active.question.exam.id,s.question_active.question.id,n),["prevent"]),class:"btn btn-outline-info btn-sm w-100 shdaow"},r(e.options[a]),9,rt))]),t("td",ut,[t("p",{innerHTML:s.question_active.question["option_"+n]},null,8,ct)])]))),128))])])])):(d(),l("div",ht,_t))]),t("div",bt,[t("div",vt,[t("div",ft,[s.page>1?(d(),l("button",{key:0,onClick:o[1]||(o[1]=u((...n)=>e.prevPage&&e.prevPage(...n),["prevent"])),type:"button",class:"btn btn-gray-400 btn-sm btn-block mb-2"},"Sebelumnya")):m("",!0)]),t("div",gt,[s.page<Object.keys(s.all_questions).length?(d(),l("button",{key:0,onClick:o[2]||(o[2]=u((...n)=>e.nextPage&&e.nextPage(...n),["prevent"])),type:"button",class:"btn btn-gray-400 btn-sm"},"Selanjutnya")):m("",!0)])])])])]),t("div",yt,[t("div",kt,[t("div",wt,[t("div",Et,r(s.question_answered)+" dikerjakan",1)]),t("div",Mt,[(d(!0),l(C,null,T(s.all_questions,(n,a)=>(d(),l("div",{key:a},[t("div",xt,[t("div",Ct,[a+1==s.page?(d(),l("button",{key:0,onClick:u(h=>e.clickQuestion(a),["prevent"]),class:"btn btn-gray-400 btn-sm w-100"},r(a+1),9,St)):m("",!0),a+1!=s.page&&n.answer==0?(d(),l("button",{key:1,onClick:u(h=>e.clickQuestion(a),["prevent"]),class:"btn btn-outline-info btn-sm w-100"},r(a+1),9,pt)):m("",!0),a+1!=s.page&&n.answer!=0?(d(),l("button",{key:2,onClick:u(h=>e.clickQuestion(a),["prevent"]),class:"btn btn-info btn-sm w-100"},r(a+1),9,Nt)):m("",!0)])])]))),128))]),t("div",Tt,[t("button",{onClick:o[3]||(o[3]=n=>e.showModalEndExam=!0),class:"btn btn-danger btn-md border-0 shadow w-100"},"Akhiri Ujian")])])])]),e.showModalEndExam?(d(),l("div",{key:0,class:q(["modal fade",{show:e.showModalEndExam}]),tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[t("div",qt,[t("div",It,[Lt,jt,t("div",Dt,[t("button",{onClick:o[4]||(o[4]=u((...n)=>e.endExam&&e.endExam(...n),["prevent"])),type:"button",class:"btn btn-primary"},"Ya, Akhiri"),t("button",{onClick:o[5]||(o[5]=u(n=>e.showModalEndExam=!1,["prevent"])),type:"button",class:"btn btn-secondary"},"Tutup")])])])],2)):m("",!0),e.showModalEndTimeExam?(d(),l("div",{key:1,class:q(["modal fade",{show:e.showModalEndTimeExam}]),"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-hidden":"true",style:{display:"block"},role:"dialog"},[t("div",At,[t("div",Vt,[Ht,Ot,t("div",Bt,[t("button",{onClick:o[6]||(o[6]=u((...n)=>e.endExam&&e.endExam(...n),["prevent"])),type:"button",class:"btn btn-primary"},"Ya")])])])],2)):m("",!0)],64)}const Wt=Q(W,[["render",Pt]]);export{Wt as default};
