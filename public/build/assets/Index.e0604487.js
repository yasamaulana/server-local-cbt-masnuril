import{L as x}from"./Admin.b51a6280.js";import{P as y}from"./Pagination.85a861a4.js";import{H as S,L as B,m as D,a as u,o as _,c as m,b as d,w as f,d as t,e as c,f as L,v as P,F as w,p as j,h as b,t as r,i as I}from"./app.8bde5e17.js";import{S as h}from"./sweetalert2.all.9e63d2cf.js";import{_ as T}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:x,components:{Head:S,Link:B,Pagination:y},props:{posts:Object},setup(){const p=(o,e=5)=>{const i=o.split(" ");return i.length>e?i.slice(0,e).join(" ")+"...":o},a=D(new URL(document.location).searchParams.get("q"));return{search:a,handleSearch:()=>{b.Inertia.get("/admin/postingan",{q:a.value})},destroy:o=>{h.fire({title:"Yakin ingin menghapus?",text:"Data tidak dapat dikembalikan!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!"}).then(e=>{e.isConfirmed&&(b.Inertia.delete(`/admin/postingan/${o}`),h.fire({title:"Berhasil!",text:"Postingan telah dihapus.",icon:"success",timer:2e3,showConfirmButton:!1}))})},formatDate:o=>{const e={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString("id-ID",e)},truncateWords:p,changeStatus:(o,e)=>{h.fire({title:"Yakin?",text:`Ubah status postingan menjadi ${e}?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, ubah!"}).then(i=>{i.isConfirmed&&b.Inertia.put(`/admin/postingan/${o}/status`,{status:e},{onSuccess:()=>{h.fire({icon:"success",title:"Berhasil!",text:`Status berhasil diubah menjadi ${e}.`,timer:2e3,showConfirmButton:!1})}})})}}}},N=t("title",null,"Postingan - Aplikasi CMS",-1),V={class:"container-fluid mt-5 mb-5"},Y={class:"row"},q={class:"col-md-8"},A={class:"row"},M={class:"col-md-3 col-12 mb-2"},U=t("i",{class:"fa fa-plus-circle"},null,-1),F=I(" Tambah "),W={class:"col-md-9 col-12 mb-2"},E={class:"input-group"},J=t("span",{class:"input-group-text border-0 shadow"},[t("i",{class:"fa fa-search"})],-1),O={class:"row mt-1"},R={class:"col-md-12"},z={class:"card border-0 shadow"},G={class:"card-body"},K={class:"table-responsive"},Q={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},X=t("thead",{class:"table-dark"},[t("tr",null,[t("th",{style:{width:"5%"}},"No"),t("th",null,"Judul"),t("th",null,"Banner"),t("th",null,"Dibuat"),t("th",null,"Status"),t("th",{style:{width:"15%"}},"Aksi")])],-1),Z={class:"text-center"},$=["src"],tt={class:"text-center"},nt={class:"d-flex align-items-center justify-content-center gap-2"},et={class:"dropdown"},st=t("button",{class:"btn btn-sm btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Status ",-1),ot={class:"dropdown-menu"},at=["onClick"],it=["onClick"],lt=t("i",{class:"fa fa-edit"},null,-1),dt=["onClick"],ct=t("i",{class:"fa fa-trash"},null,-1),rt=[ct];function ht(p,a,l,s,v,k){const o=u("Head"),e=u("Link"),i=u("Pagination");return _(),m(w,null,[d(o,null,{default:f(()=>[N]),_:1}),t("div",V,[t("div",Y,[t("div",q,[t("div",A,[t("div",M,[d(e,{href:"/admin/postingan/create",class:"btn btn-md btn-primary w-100 shadow border-0"},{default:f(()=>[U,F]),_:1})]),t("div",W,[t("form",{onSubmit:a[1]||(a[1]=c((...n)=>s.handleSearch&&s.handleSearch(...n),["prevent"]))},[t("div",E,[L(t("input",{type:"text",class:"form-control shadow border-0","onUpdate:modelValue":a[0]||(a[0]=n=>s.search=n),placeholder:"Cari postingan..."},null,512),[[P,s.search]]),J])],32)])])])]),t("div",O,[t("div",R,[t("div",z,[t("div",G,[t("div",K,[t("table",Q,[X,t("tbody",null,[(_(!0),m(w,null,j(l.posts.data,(n,C)=>(_(),m("tr",{key:n.id},[t("td",Z,r(++C+(l.posts.current_page-1)*l.posts.per_page),1),t("td",null,r(s.truncateWords(n.title)),1),t("td",null,[t("img",{src:n.banner?`/storage/${n.banner}`:"",alt:"Banner",class:"img-fluid",style:{width:"100px"}},null,8,$)]),t("td",null,r(s.formatDate(n.created_at)),1),t("td",null,r(n.status),1),t("td",tt,[t("div",nt,[t("div",et,[st,t("ul",ot,[t("li",null,[t("a",{class:"dropdown-item",href:"#",onClick:c(g=>s.changeStatus(n.id,"published"),["prevent"])},"Published",8,at)]),t("li",null,[t("a",{class:"dropdown-item",href:"#",onClick:c(g=>s.changeStatus(n.id,"draft"),["prevent"])},"Draft",8,it)])])]),d(e,{href:`/admin/postingan/${n.id}/edit`,class:"btn btn-sm btn-info"},{default:f(()=>[lt]),_:2},1032,["href"]),t("button",{onClick:c(g=>s.destroy(n.id),["prevent"]),class:"btn btn-sm btn-danger"},rt,8,dt)])])]))),128))])])]),d(i,{links:l.posts.links,align:"end"},null,8,["links"])])])])])])],64)}const pt=T(H,[["render",ht]]);export{pt as default};
