import{L as P}from"./Admin.b51a6280.js";import{P as U}from"./Pagination.85a861a4.js";import{H as C,L as V,m as h,a as f,o as n,c as l,b as v,w as x,d as t,e as A,f as i,v as M,s as k,F as p,p as y,g as B,q as D,h as L,t as d}from"./app.8bde5e17.js";import{S}from"./sweetalert2.all.9e63d2cf.js";import{_ as N}from"./_plugin-vue_export-helper.cdc0426e.js";const I={layout:P,components:{Head:C,Link:V,Pagination:U},props:{pendaftarans:Object},setup(g){const s=h({allSelected:!1,student_id:[],status:"Menunggu Verifikasi"}),r=()=>{s.value.allSelected?s.value.student_id=g.pendaftarans.data.map(a=>a.id):s.value.student_id=[]},o=()=>{if(s.value.student_id.length===0){S.fire("Peringatan","Pilih minimal satu pendaftar.","warning");return}S.fire({title:"Yakin?",text:"Status akan diubah untuk semua pendaftar terpilih.",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, ubah!"}).then(a=>{a.isConfirmed&&L.Inertia.post("/admin/ppdb/bulk-update-status",s.value,{onSuccess:()=>{S.fire("Berhasil!","Status berhasil diperbarui.","success"),s.value.allSelected=!1,s.value.student_id=[]}})})},w=new Date().getFullYear(),m=h(new URL(document.location).searchParams.get("q")||""),c=h(new URL(document.location).searchParams.get("status")||"Menunggu Konfirmasi"),u=h(new URL(document.location).searchParams.get("tahun")||w.toString()),_=Array.from({length:20},(a,b)=>(2022+b).toString());return{search:m,form:s,handleSearch:()=>{L.Inertia.get("/admin/ppdb",{q:m.value,status:c.value,tahun:u.value})},selectAll:r,submitEditStatus:o,status:c,tahun:u,tahunList:_}}},E=t("title",null,"PPDB - Aplikasi Ujian Online",-1),H={class:"container-fluid mb-5 mt-5"},K={class:"row"},T={class:"col-md-8"},Y={class:"row"},j={class:"col-md-9 col-12 mb-2"},q={class:"d-flex gap-2"},F={class:"input-group"},R=t("span",{class:"input-group-text border-0 shadow"},[t("i",{class:"fa fa-search"})],-1),O=t("option",{value:""},"Semua Status",-1),z=t("option",{value:"Menunggu Konfirmasi"},"Menunggu Konfirmasi",-1),G=t("option",{value:"Diterima"},"Diterima",-1),J=t("option",{value:"Ditolak"},"Ditolak",-1),Q=[O,z,G,J],W=t("option",{value:""},"Semua Tahun",-1),X=["value"],Z={class:"row mt-1"},$={class:"col-md-12"},tt={class:"card border-0 shadow"},et={class:"card-body"},st={key:0,class:"d-flex justify-content-between mb-3"},ot=t("option",{value:""},"- Pilih Salah Satu - ",-1),at=t("option",{value:"Diterima"},"Diterima",-1),nt=t("option",{value:"Ditolak"},"Ditolak",-1),lt=[ot,at,nt],it={class:"table-responsive"},dt={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},rt={class:"thead-dark"},ct={class:"border-0"},ut={class:"border-0 rounded-start",style:{width:"5%"}},ht=t("th",{class:"border-0"},"NISN",-1),mt=t("th",{class:"border-0"},"NIK",-1),_t=t("th",{class:"border-0"},"Nama",-1),bt=t("th",{class:"border-0"},"Asal Sekolah",-1),ft=t("th",{class:"border-0"},"Status",-1),vt=t("th",{class:"border-0 rounded-end",style:{width:"15%"}},"Aksi",-1),kt=t("div",{class:"mt-2"},null,-1),pt=["id","value","checked"],St={class:"text-center"},gt=t("i",{class:"far fa-eye"},null,-1);function wt(g,s,r,o,w,m){const c=f("Head"),u=f("Link"),_=f("Pagination");return n(),l(p,null,[v(c,null,{default:x(()=>[E]),_:1}),t("div",H,[t("div",K,[t("div",T,[t("div",Y,[t("div",j,[t("form",{onSubmit:s[5]||(s[5]=A((...e)=>o.handleSearch&&o.handleSearch(...e),["prevent"]))},[t("div",q,[t("div",F,[i(t("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":s[0]||(s[0]=e=>o.search=e),placeholder:"masukkan kata kunci dan enter..."},null,512),[[M,o.search]]),R]),i(t("select",{class:"form-select border-0 shadow","onUpdate:modelValue":s[1]||(s[1]=e=>o.status=e),onChange:s[2]||(s[2]=(...e)=>o.handleSearch&&o.handleSearch(...e))},Q,544),[[k,o.status]]),i(t("select",{class:"form-select border-0 shadow","onUpdate:modelValue":s[3]||(s[3]=e=>o.tahun=e),onChange:s[4]||(s[4]=(...e)=>o.handleSearch&&o.handleSearch(...e))},[W,(n(!0),l(p,null,y(o.tahunList,e=>(n(),l("option",{key:e,value:e},d(e),9,X))),128))],544),[[k,o.tahun]])])],32)])])])]),t("div",Z,[t("div",$,[t("div",tt,[t("div",et,[o.form.student_id.length>0?(n(),l("div",st,[t("div",null,[i(t("select",{"onUpdate:modelValue":s[6]||(s[6]=e=>o.form.status=e),class:"form-select form-select-sm w-auto d-inline-block"},lt,512),[[k,o.form.status]]),t("button",{onClick:s[7]||(s[7]=(...e)=>o.submitEditStatus&&o.submitEditStatus(...e)),class:"btn btn-sm btn-success ms-2"}," Ubah Status Terpilih ")])])):B("",!0),t("div",it,[t("table",dt,[t("thead",rt,[t("tr",ct,[t("th",ut,[i(t("input",{type:"checkbox","onUpdate:modelValue":s[8]||(s[8]=e=>o.form.allSelected=e),onChange:s[9]||(s[9]=(...e)=>o.selectAll&&o.selectAll(...e))},null,544),[[D,o.form.allSelected]])]),ht,mt,_t,bt,ft,vt])]),kt,t("tbody",null,[(n(!0),l(p,null,y(r.pendaftarans.data,(e,a)=>(n(),l("tr",{key:a},[t("td",null,[i(t("input",{type:"checkbox","onUpdate:modelValue":s[10]||(s[10]=b=>o.form.student_id=b),id:e.id,value:e.id,number:"",checked:o.form.allSelected},null,8,pt),[[D,o.form.student_id]])]),t("td",null,d(e.nisn),1),t("td",null,d(e.nik),1),t("td",null,d(e.nama),1),t("td",null,d(e.asal_sekolah),1),t("td",null,d(e.status),1),t("td",St,[v(u,{href:`/admin/ppdb/${e.id}/show`,class:"btn btn-sm btn-info border-0 shadow me-2",type:"button"},{default:x(()=>[gt]),_:2},1032,["href"])])]))),128))])])]),v(_,{links:r.pendaftarans.links,align:"end"},null,8,["links"])])])])])])],64)}const Ut=N(I,[["render",wt]]);export{Ut as default};
